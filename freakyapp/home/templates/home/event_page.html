{% extends "main.html" %}

{% block content %}

<h1 class="page-title">Events Page</h1>

<div class="search-bar">
<form class="header__search" method="GET" action="{% url 'events'%}">
    <label>
      <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">
        <title>search</title>
        <path
        d="M32 30.586l-10.845-10.845c1.771-2.092 2.845-4.791 2.845-7.741 0-6.617-5.383-12-12-12s-12 5.383-12 12c0 6.617 5.383 12 12 12 2.949 0 5.649-1.074 7.741-2.845l10.845 10.845 1.414-1.414zM12 22c-5.514 0-10-4.486-10-10s4.486-10 10-10c5.514 0 10 4.486 10 10s-4.486 10-10 10z"
      ></path>
      </svg>
      <input name="q" placeholder="Search for events..." />
    </label>
  </form>
</div>

<div class="events-container">
    {% for event in events %}
    <a href="{% url 'event-details' event.id %}" class="card-link">
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">{{ field_titles.title }}: {{ event.title }}</h2>
            </div>
            <div class="card-body">
                <p><strong>{{ field_titles.host }}:</strong> {{ event.host }}</p>
                <p><strong>{{ field_titles.description }}:</strong> {{ event.description }}</p>
                <p><strong>{{ field_titles.date }}:</strong> {{ event.date|date:"d-m-Y" }}</p>
                <p><strong>{{ field_titles.maxPeople }}:</strong> {{ event.maxPeople }}</p>
                <p><strong>{{ field_titles.topics }}:</strong>
                    {% for topic in event.topics.all %}
                        {{ topic.name }}{% if not forloop.last %}, {% endif %}
                    {% empty %}
                        No topics assigned.
                    {% endfor %}
                </p>
    
            </div>
        </div>
    </a>
    {% empty %}
    <p class="no-events">No events found.</p>
    {% endfor %}
</div>

{% endblock content %}
